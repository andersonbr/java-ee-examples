= spring-faces

//tag::content[]
=== spring-faces
Spring + JSF (Prime Faces)

Deployed to:
- Glassfish 5.0
- apache tomcat 9.0.6

==== spring / JSF integration
.Faces knows about spring: src/main/webapp/WEB-INF/faces-config.xml
[sources,xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.2"
              xmlns="http://xmlns.jcp.org/xml/ns/javaee"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee
              http://xmlns.jcp.org/xml/ns/javaee/web-facesconfig_2_2.xsd">

  <!-- spring -->
  <application>
    <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>
  </application>

</faces-config>
----

.Web project knows about spring: src/main/webapp/WEB-INF/web.xml
[sources,xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

  <!-- spring -->
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
  <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
  </listener>
  <listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
  </listener>

</web-app>
----

.Spring configuration src/main/webapp/WEB-INF/applicationContext.xml
[sources,xml]
----
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
                           http://www.springframework.org/schema/beans/spring-beans-4.3.xsd
                           http://www.springframework.org/schema/context
                           http://www.springframework.org/schema/context/spring-context-4.3.xsd">

  <context:component-scan base-package="daggerok" />
</beans>
----

==== build, run, test
[sources,bash]
----
./mvnw clean package com.dkanejs.maven.plugins:docker-compose-maven-plugin:1.0.1:up
curl localhost:8080/app/
curl --insecure https://127.0.0.1:4848/
./mvnw com.dkanejs.maven.plugins:docker-compose-maven-plugin:1.0.1:down

./gradlew clean build composeUp
http :8080/app/
http :9990/console/index.html
./gradlew composeDown
----

links:

. link:https://musingsinjava.wordpress.com/2014/11/02/enabling-jsf-2-2-and-cdi-1-2-on-tomcat-8/[Tomcat + JSF (weld dependency)]
. link:https://www.youtube.com/playlist?list=PL73qvSDlAVVhIVQX7d36glpQllxCIxEyR[Full Stack Enterprise Web Development with Java, Maven, JSF, PrimeFaces, Spring, Hibernate]

generated by link:https://github.com/daggerok/generator-daggerok-fatjar/[daggerok-fatjar] yeoman generator

//end::content[]
